<?xml version="1.0" encoding="UTF-8"?>
<custom-sql>
    
    <sql id="org.gfbio.service.persistence.ContentFinderImpl.getCellContent">
	    <![CDATA[
			SELECT  
				public.gfbio_content.cellcontent
			FROM 
				public.gfbio_content
			WHERE 
				gfbio_content.headid =? AND
				gfbio_content.rowid= ? AND
				gfbio_content.columnid= ?
		]]>
    </sql>
    
    <sql id="org.gfbio.service.persistence.ContentFinderImpl.getCellContentByContentId">
	    <![CDATA[
			SELECT 
	  			public.gfbio_content.cellcontent
			FROM 
	 			public.gfbio_content
			 WHERE
	 			public.gfbio_content.contentid =?
		]]>
    </sql>
    
    <sql id="org.gfbio.service.persistence.ContentFinderImpl.getColumnIdById">
	    <![CDATA[
			SELECT 
			  gfbio_content.columnid 
			FROM 
			  public.gfbio_content
			WHERE
			  gfbio_content.contentid =  ? 
		]]>
    </sql>

    <sql id="org.gfbio.service.persistence.ContentFinderImpl.getContentIdsWithoutRelationships">
	    <![CDATA[
			SELECT
			public.gfbio_content.contentid
			FROM 
				public.gfbio_head,
				public.gfbio_content
			WHERE
				CAST(gfbio_content.rowid AS text) not in (
				SELECT
						public.gfbio_content.cellcontent
					FROM 
						public.gfbio_content
					WHERE
						gfbio_content.rowid in (
							SELECT
								distinct rowid
							FROM
								public.gfbio_head,
								public.gfbio_column,
								public.gfbio_content
							WHERE
								gfbio_column.headid = gfbio_content.headid AND
								gfbio_column.headid = gfbio_head.headid AND
								gfbio_head.table_type ='relationship' AND
								(gfbio_column.column_name = ? OR
								gfbio_column.column_name = ?) AND
								gfbio_content.cellcontent = ?
														)
						AND
						gfbio_content.cellcontent != ? 
						)AND
			gfbio_content.headid = gfbio_head.headid AND
			gfbio_head.table_name =?
		]]>
    </sql>
    
    <sql id="org.gfbio.service.persistence.ContentFinderImpl.getContentIdsWithRelationships">
	    <![CDATA[
			SELECT
				public.gfbio_content.contentid
			FROM 
				public.gfbio_content
			WHERE
				CAST(gfbio_content.rowid AS text)  in (
					SELECT
						public.gfbio_content.cellcontent
					FROM 
						public.gfbio_content,
						public.gfbio_column

					WHERE
						gfbio_content.rowid in (
							SELECT
								Distinct rowid
							FROM
								public.gfbio_head,
								public.gfbio_column,
								public.gfbio_content
							WHERE
								gfbio_column.headid = gfbio_content.headid AND
								gfbio_column.headid = gfbio_head.headid AND
								gfbio_head.table_type ='relationship' AND
								(
									gfbio_column.column_name = ? OR
									gfbio_column.column_name = ?
								) AND
								gfbio_content.cellcontent = ?
						)
						AND
						gfbio_content.cellcontent != ? AND
						gfbio_column.columnid = gfbio_content.columnid AND
						(
							gfbio_column.column_name = ? OR
							gfbio_column.column_name = ?
						)
				)
		]]>
    </sql>
    
    <sql id="org.gfbio.service.persistence.ContentFinderImpl.getContentIdsByRowId">
	    <![CDATA[
			SELECT 
			  public.gfbio_content.contentId
			FROM 
			  public.gfbio_content
			WHERE
			  rowId = ?
		]]>
    </sql>
           
   <sql id="org.gfbio.service.persistence.ContentFinderImpl.getHeadIdById">
	    <![CDATA[
			SELECT 
			  gfbio_content.headid
			FROM 
			  public.gfbio_content
			WHERE
			  contentId = ?
		]]>
    </sql>
        
    <sql id="org.gfbio.service.persistence.ContentFinderImpl.getRowIds">
	    <![CDATA[
			SELECT  
				DISTINCT public.gfbio_content.rowid
			FROM 
				public.gfbio_content
			WHERE 
				gfbio_content.headid = ? 
		]]>
    </sql>
    
    <sql id="org.gfbio.service.persistence.ContentFinderImpl.getRowIdByCellContent">
	    <![CDATA[
			SELECT
				rowid
			FROM
				gfbio_content
			WHERE
				headid = ? AND
				(
					SELECT
						columnid
					FROM
						gfbio_column
					WHERE
						headid = ? AND
						column_name = ?
				) = gfbio_content.columnid AND
				cellcontent = ?
		]]>
    </sql>
    
    <sql id="org.gfbio.service.persistence.ContentFinderImpl.getRowIdByContentId">
	    <![CDATA[
			SELECT 
				gfbio_content.rowid
			FROM 
				public.gfbio_content
			WHERE
				contentid=?
		]]>
    </sql>
    
    <sql id="org.gfbio.service.persistence.ContentFinderImpl.getRowIdOfRelation">
	    <![CDATA[
			Select rowid 
			From 
			  public.gfbio_content
			where
				rowid in (
					SELECT 
				  		rowid 
					FROM 
						public.gfbio_content
					where
						cellcontent = ?)	AND
				cellcontent = ?
		]]>
    </sql>
    
    
    
    
</custom-sql>