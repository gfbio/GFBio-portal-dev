<?xml version="1.0" encoding="UTF-8"?>
<Module>
	<ModulePrefs title="Search Facet" author="gfbiodev"
		author_email="dev@gfbio.org" >
		<Require feature="pubsub-2">
			<Param name="topics">
				<Topic title="GFBio Search Facet" name="gfbio.search.facet" subscribe="true" publish="true"/>

			</Param>
		</Require>
		<Require feature="dynamic-height"/>
	</ModulePrefs>
	<Content type="html">
		<![CDATA[
	<!DOCTYPE html>
		<html style="height: 100%;">
			<head  lang="en">
				<meta charset="UTF-8">
				<title>GFBio Search Facet</title>
				<script src="http://gfbio-dev1.inf-bb.uni-jena.de/gfbio/search/js/jquery-1.10.2.js"	type="text/javascript"></script>
				<script src="http://gfbio-dev1.inf-bb.uni-jena.de/gfbio/search/js/jquery-1.10.2-ui.js"	type="text/javascript"></script>
				<script src="http://gfbio-dev1.inf-bb.uni-jena.de/gfbio/search/js/jquery.bonsai.js"	type="text/javascript"></script>
				<script src="http://gfbio-dev1.inf-bb.uni-jena.de/gfbio/search/js/tag-it.js" type="text/javascript" charset="utf-8"></script>
				<script src="http://gfbio-dev1.inf-bb.uni-jena.de/gfbio/search/js/facet.js?r=123"	type="text/javascript"></script>
				<link rel="stylesheet"	href="http://gfbio-dev1.inf-bb.uni-jena.de/gfbio/search/css/jquery.bonsai.css" />
				<link rel="stylesheet"	href="http://gfbio-dev1.inf-bb.uni-jena.de/gfbio/search/css/search.css" />
				<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/flick/jquery-ui.css">
				<link rel="stylesheet" type="text/css" href="http://gfbio-dev1.inf-bb.uni-jena.de/gfbio/search/css/jquery.tagit.css">
				<link rel="stylesheet" type="text/css" href="http://gfbio-dev1.inf-bb.uni-jena.de/gfbio/search/css/jquery-ui.css">
				
				<script type="text/javascript">
				
					gadgets.HubSettings.onConnect = function(hub, suc, err) {
						listenToPubSub();
					};
					$(document).ready(function() { 
						createTagBox();
						appendDivAfteriFrame();
					});

function createTagBox(){
	var facetTags = document.getElementById('facetTags');
	$(facetTags).tagit({
		afterTagRemoved: function(evt, ui) {
			var tagName = facetTags.tagit('tagLabel', ui.tag);
			console.log(':Facet: afterTagRemoved: ' + tagName);
			// remove term from facet basket
			removeFromFacetBasket(tagName);
			fireFacetData();
		},
	});
	if (facetTags != null){
		$(facetTags.getElementsByClassName('ui-widget-content')).attr("readOnly","true");
	}
}

				</script>
			</head>
			<body style="height:100%;">
				<div id="search_facet">
					<div id="facetDiv" class="invisible">Filter Results: 
					<a href='#' onclick='resetFacetBasket();return false;' style='font-size:11px;'>clear filters</a>
					<ul id="facetTags"></ul>
					</div>
					<div id="search_facet_tree">
					</div>
				</div>
				<input id="facetBasket" type="hidden" value=""/>
				<input id="minYear" type="hidden" value=""/>
				<input id="maxYear" type="hidden" value=""/>
				<input id="minYearSelected" type="hidden" value=""/>
				<input id="maxYearSelected" type="hidden" value=""/>
			</body>
			
		</html>
	]]>

	</Content>
</Module>